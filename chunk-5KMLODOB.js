import{a as Te,b as Le}from"./chunk-EUBIM2HV.js";import{a as ye}from"./chunk-OQ73XYO5.js";import{a as xe,b as ve,c as we,d as Me,e as be,f as Ne,g as Ie}from"./chunk-H62NF5CI.js";import{a as de,b as _e}from"./chunk-4GM2TD43.js";import{m as D}from"./chunk-NT2ZJVZ3.js";import{d as ue,f as fe,h as ge,i as he,j as Se,k as ze,l as Ce}from"./chunk-6UAJTX6G.js";import"./chunk-4BK5VTE3.js";import{l as pe,m as ce}from"./chunk-AC7TKJ5X.js";import{a as N}from"./chunk-YCJYKQOA.js";import"./chunk-TQJE3RXR.js";import"./chunk-B2HYQPAC.js";import{f as ae,g as me,h as le,i as se}from"./chunk-6XJBX7HY.js";import"./chunk-P2QTYBO4.js";import"./chunk-HPZNAN6D.js";import{Ob as j,Pb as H,Rb as q,Sb as J,Wb as K,Zb as Q,_b as X,ac as Y,bc as Z,ec as ee,hc as te,ic as ie,jc as ne,kc as oe,lc as re,pc as b,sa as A}from"./chunk-PO7J3B2M.js";import{Ca as c,Cb as W,Da as d,Dc as z,Ec as C,Fc as y,Gc as $,Ib as g,Jd as U,Ob as s,Qc as V,a as I,ac as m,b as T,bc as a,cc as v,de as R,g as k,gc as h,jc as f,lc as _,le as E,nb as F,pd as O,qb as n,qd as B,te as S,vb as w,wc as L,xc as p,yc as u,yd as G,zc as M}from"./chunk-DNIIOSAE.js";function Ve(l,o){if(l&1&&(m(0,"div",12)(1,"b"),p(2),a()()),l&2){let e=_();n(2),u(e.$t("_buildTip"))}}function Ee(l,o){if(l&1){let e=h();m(0,"app-upload",20),f("onChange",function(t){c(e);let r=_();return d(r.onLogoChange(t,"logo"))}),a()}}function De(l,o){if(l&1){let e=h();m(0,"app-upload",20),f("onChange",function(t){c(e);let r=_();return d(r.onLogoChange(t,"darkLogo"))}),a()}}function Pe(l,o){if(l&1){let e=h();m(0,"input",32),y("ngModelChange",function(t){c(e);let r=_().$implicit;return C(r.url,t)||(r.url=t),d(t)}),a()}if(l&2){let e=_().$implicit;z("ngModel",e.url)}}function ke(l,o){if(l&1&&v(0,"img",33),l&2){let e=_().$implicit;s("src",e.icon,F)}}function Fe(l,o){if(l&1){let e=h();m(0,"a",34),f("nzOnConfirm",function(){c(e);let t=_().index,r=_();return d(r.handleDelete(t))}),p(1),a()}if(l&2){let e=_(2);s("nzPopconfirmTitle",e.$t("_confirmDel")),n(),M(" ",e.$t("_del")," ")}}function We(l,o){if(l&1){let e=h();m(0,"tr")(1,"td")(2,"input",21),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.name,t)||(r.name=t),d(t)}),a()(),m(3,"td"),g(4,Pe,1,1,"input",22),a(),m(5,"td",23),g(6,ke,1,1,"img",24),m(7,"input",25),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.icon,t)||(r.icon=t),d(t)}),a(),m(8,"app-upload",20),f("onChange",function(t){let r=c(e).index,x=_();return d(x.onChangeUpload(t,r))}),a()(),m(9,"td")(10,"input",26),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.placeholder,t)||(r.placeholder=t),d(t)}),a()(),m(11,"td")(12,"nz-switch",27),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.blocked,t)||(r.blocked=t),d(t)}),a()(),m(13,"td",28)(14,"a",29),f("click",function(){let t=c(e).index,r=_();return d(r.moveUp(t))}),p(15),a(),m(16,"a",30),f("click",function(){let t=c(e).index,r=_();return d(r.moveDown(t))}),p(17),a(),g(18,Fe,2,2,"a",31),a()()}if(l&2){let e=o.$implicit,i=_();n(2),z("ngModel",e.name),n(2),s("ngIf",!e.isInner),n(2),s("ngIf",e.icon),n(),z("ngModel",e.icon),n(3),z("ngModel",e.placeholder),n(2),z("ngModel",e.blocked),n(3),u(i.$t("_moveUp")),n(2),u(i.$t("_moveDown")),n(),s("ngIf",!e.isInner)}}var P=class l{constructor(o,e,i){this.fb=o;this.message=e;this.modal=i;let t=T(I({},E),{list:null}),r={};for(let x in t)t[x]!=null&&(r[x]=[t[x]]);this.validateForm=this.fb.group(r)}$t=S;isSelfDevelop=R;searchList=E.list;submitting=!1;validateForm;onLogoChange(o,e){this.validateForm.get(e)?.setValue(o.cdn||"")}handleAdd(){this.searchList.some(e=>!e.name.trim())||this.searchList.unshift({name:"",url:"",icon:"",placeholder:"",blocked:!1,isInner:!1})}handleDelete(o){this.searchList.splice(o,1)}moveUp(o){if(o===0)return;let e=this.searchList[o],i=this.searchList[o-1];this.searchList[o-1]=e,this.searchList[o]=i}moveDown(o){if(o===this.searchList.length-1)return;let e=this.searchList[o],i=this.searchList[o+1];this.searchList[o+1]=e,this.searchList[o]=i}handleSubmit(){return k(this,null,function*(){if(this.submitting)return;this.submitting=!0;let o=this.validateForm.value,e=[];o.logo&&e.push(D(o.logo)),o.darkLogo&&e.push(D(o.darkLogo));let i=yield Promise.all(e);for(let t of i)if(!t.valid){this.message.error(`${S("_errLogo")}: "${t.url}"`),this.submitting=!1;return}this.submitting=!1,this.modal.info({nzTitle:S("_syncDataOut"),nzOkText:S("_confirmSync"),nzContent:S("_confirmSyncTip"),nzOnOk:()=>{this.submitting=!0;let t=T(I({},o),{list:this.searchList.filter(r=>r.name.trim())});A({message:"update search",content:JSON.stringify(t),path:U}).then(()=>{this.message.success(S("_saveSuccess"))}).finally(()=>{this.submitting=!1})}})})}onChangeUpload(o,e){this.searchList[e].icon=o.cdn}static \u0275fac=function(e){return new(e||l)(w(ne),w(b),w(N))};static \u0275cmp=W({type:l,selectors:[["system-tag"]],features:[$([N,b])],decls:47,vars:27,consts:[["suffixLogo",""],["suffixDarkLogo",""],["basicTable",""],["nz-button","",1,"add-btn",3,"click","nzLoading"],["nz-button","","nzType","primary",3,"click","nzLoading"],["class","mb-2",4,"ngIf"],["nz-form","",3,"formGroup"],[3,"nzSpan"],[3,"nzSuffix"],["nz-input","","formControlName","logo"],["nz-input","","formControlName","darkLogo"],["formControlName","height",3,"nzMin","nzMax"],[1,"mb-2"],[3,"nzData"],["nzWidth","150px"],["nzWidth","220px"],["nzWidth","260px"],["nzWidth","100px"],["nzWidth","200px"],[4,"ngFor","ngForOf"],[3,"onChange"],["nz-input","","maxlength","10",3,"ngModelChange","ngModel"],["nz-input","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"whitespace-nowrap"],["class","icon",3,"src",4,"ngIf"],["nz-input","","type","text",2,"width","180px",3,"ngModelChange","ngModel"],["nz-input","","maxlength","50",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom","class","ml-2.5 !text-red-500",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nz-input","",3,"ngModelChange","ngModel"],[1,"icon",3,"src"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom",1,"ml-2.5","!text-red-500",3,"nzOnConfirm","nzPopconfirmTitle"]],template:function(e,i){if(e&1){let t=h();m(0,"button",3),f("click",function(){return c(t),d(i.handleAdd())}),p(1),a(),m(2,"button",4),f("click",function(){return c(t),d(i.handleSubmit())}),p(3),a(),g(4,Ve,3,1,"div",5),m(5,"form",6)(6,"nz-form-item")(7,"nz-form-label",7),p(8),a(),m(9,"nz-form-control",7)(10,"nz-input-group",8),v(11,"input",9),a(),g(12,Ee,1,0,"ng-template",null,0,V),a()(),m(14,"nz-form-item")(15,"nz-form-label",7),p(16),a(),m(17,"nz-form-control",7)(18,"nz-input-group",8),v(19,"input",10),a(),g(20,De,1,0,"ng-template",null,1,V),a()(),m(22,"nz-form-item")(23,"nz-form-label",7),p(24),a(),m(25,"nz-form-control",7),v(26,"nz-slider",11),a()()(),m(27,"div",12),p(28,"e.g. https://example.com/search?q=${q}"),a(),m(29,"nz-table",13,2)(31,"thead")(32,"tr")(33,"th",14),p(34),a(),m(35,"th",15),p(36),a(),m(37,"th",16),p(38),a(),m(39,"th",15),p(40),a(),m(41,"th",17),p(42),a(),m(43,"th",18),p(44),a()()(),m(45,"tbody"),g(46,We,19,9,"tr",19),a()()}if(e&2){let t=L(13),r=L(21);s("nzLoading",i.submitting),n(),M(" ",i.$t("_addRow"),`
`),n(),s("nzLoading",i.submitting),n(),M(" ",i.$t("_save"),`
`),n(),s("ngIf",!i.isSelfDevelop),n(),s("formGroup",i.validateForm),n(2),s("nzSpan",2),n(),u(i.$t("_logoImg")),n(),s("nzSpan",22),n(),s("nzSuffix",t),n(5),s("nzSpan",2),n(),u(i.$t("_logoDarkImg")),n(),s("nzSpan",22),n(),s("nzSuffix",r),n(5),s("nzSpan",2),n(),u(i.$t("_logoMaxHeight")),n(),s("nzSpan",22),n(),s("nzMin",40)("nzMax",120),n(3),s("nzData",i.searchList),n(5),u(i.$t("_engineName")),n(2),u(i.$t("_engineUrl")),n(2),u(i.$t("_icon")),n(2),u(i.$t("_desc")),n(2),u(i.$t("_isDisable")),n(2),u(i.$t("_action")),n(2),s("ngForOf",i.searchList)}},dependencies:[oe,Z,K,Q,X,ie,Y,re,ee,te,G,O,B,J,q,j,H,Ce,he,ue,fe,ze,ge,Se,se,ae,le,me,ye,_e,de,ce,pe,Ie,ve,xe,Me,we,Ne,be,Le,Te],styles:[".add-btn[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:20px}.icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px;object-fit:cover}  #file{vertical-align:middle;margin-left:10px}  #file .anticon{font-size:20px}"]})};export{P as default};
