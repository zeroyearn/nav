import{g,u as E}from"./chunk-5YJSJE3O.js";import{ea as d,ha as A,sa as T}from"./chunk-B6X6HNUN.js";import{Fd as y,Gd as v,Md as s,Qd as W,be as I,de as m,f as S,g as p,qe as f,te as h}from"./chunk-JLLOXBIQ.js";var b=S(W(),1);function H(){return p(this,null,function*(){if(m)return;function n(r){r.forEach(e=>{f.push(e)}),d.emit("WEB_FINISH"),window.__FINISHED__=!0}let a=A(f,I);if(f.splice(0,f.length),!I)return n(a);if(window.localStorage.getItem(s.DATE_TIME)!==y.datetime){let r=[s.WEBSITE,s.DATE_TIME];Array.from({length:globalThis.localStorage.length},(e,t)=>globalThis.localStorage.key(t)).forEach(e=>{e&&r.includes(e)&&globalThis.localStorage.removeItem(e)}),globalThis.localStorage.setItem(s.DATE_TIME,y.datetime),b.default.removeItem(s.WEBSITE),n(a),I&&setTimeout(()=>{d.emit("NOTIFICATION",{type:"success",title:h("_buildSuccess"),content:y.datetime,config:{nzDuration:0}})},1e3);return}try{let r=(yield b.default.getItem(s.WEBSITE))||a;n(r)}catch{n(a)}})}function u(n){return n=n||f,m?T({content:JSON.stringify(n),path:v}):b.default.setItem(s.WEBSITE,n)}function M(n){n||=f;let{id:a}=g(),{oneIndex:i,twoIndex:r}=E(a),e=!n[i].nav[r].collapsed;return n[i].nav[r].collapsed=e,n[i].nav[r].nav.map(t=>(t.collapsed=e,t)),m||u(n),e}function R(n,a=!1){return p(this,null,function*(){let i=!1;function r(e){for(let t=0;t<e.length;t++){let o=e[t];Array.isArray(o.nav)&&(o.nav=o.nav.filter(l=>l.name&&n.includes(a?l.rId:l.id)?(i=!0,!1):!0),r(o.nav))}}if(r(f),i){yield u(f);let{q:e}=g();e&&!m&&d.emit("WEB_REFRESH")}return i})}function j(n,a){let i=Object.keys(a),r=!1;function e(t){for(let o=0;o<t.length;o++){let l=t[o];if(l.name&&l.id===n){r=!0;for(let c of i)l[c]=a[c]}Array.isArray(l.nav)&&e(l.nav)}}return e(f),u(f),r}function q(n){let a=null;function i(r){for(let e=0;e<r.length;e++){let t=r[e];if(t.name&&t.id===n){a=t;break}Array.isArray(t.nav)&&i(t.nav)}}return i(f),a}function K(n,a){let i=Object.keys(a),r=!1;function e(t){for(let o=0;o<t.length;o++){let l=t[o];if(l.title&&l.id===n){r=!0;for(let c of i)l[c]=a[c]}Array.isArray(l.nav)&&!l.nav[0]?.name&&e(l.nav)}}return e(f),u(f),r}function z(n,a=!1){return p(this,null,function*(){let i=!1;function r(e){for(let t=0;t<e.length;t++){let o=e[t];if(Array.isArray(o.nav)){if(r(o.nav),o.nav[0]?.name)break;o.nav=o.nav.filter(l=>l.title&&n.includes(a?l.rId:l.id)?(i=!0,!1):!0)}}}return n.forEach(e=>{f.forEach((t,o)=>{t.id===e&&(i=!0,f.splice(o,1))})}),r(f),i&&(yield u(f)),i})}function G(n,a){let i=!1;function r(e){for(let t=0;t<e.length;t++){let o=e[t];o.title&&o.id===n&&(i=!0,o.nav.unshift(a)),Array.isArray(o.nav)&&r(o.nav)}}return r(f),u(f),i}export{H as a,u as b,M as c,R as d,j as e,q as f,K as g,z as h,G as i};
